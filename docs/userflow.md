## **지도 기반 장소 앱 상세 유저플로우**

본 문서는 `requirement.md`와 `prd.md`를 기반으로, 애플리케이션의 핵심 기능들에 대한 사용자 상호작용 및 시스템 처리 로직을 상세히 정의합니다. 각 플로우는 **입력(Input), 처리(Processing), 출력(Output)** 3단계로 구성되며, 발생 가능한 엣지케이스를 포함합니다.

### **기능 1: 장소 검색 (Place Search)**

#### 1. 입력 (Input)
-   사용자가 메인 화면의 장소 검색 입력 필드를 탭한다.
-   사용자가 검색하고자 하는 키워드를 입력한다. (예: "시청역 맛집")
-   사용자가 키보드의 검색 버튼 또는 화면의 검색 아이콘을 탭하여 검색을 실행한다.

#### 2. 처리 (Processing)
1.  시스템은 입력 필드로부터 검색 키워드 텍스트를 가져온다.
2.  **[엣지케이스]** 시스템은 키워드가 비어 있거나 공백으로만 이루어져 있는지 검증한다.
    -   **조건 충족 시 (비어 있을 경우):** API 요청을 보내지 않고 처리를 중단한다.
3.  시스템은 검증된 키워드를 파라미터로 하여 네이버 검색 API에 장소 검색을 요청한다.
4.  **[엣지케이스]** 시스템은 API 요청에 대한 응답을 대기하며, 네트워크 오류나 타임아웃이 발생하는지 감지한다.
    -   **오류 발생 시:** 실패 처리를 진행한다.
5.  시스템은 API로부터 응답을 수신한다.
6.  **[엣지케이스]** 시스템은 응답이 성공적이었으나, 검색 결과 데이터가 비어 있는지(결과 없음) 확인한다.
    -   **결과가 없을 경우:** '결과 없음' 상태로 처리한다.
7.  시스템은 성공적으로 수신한 검색 결과 데이터를 UI에 표시하기 적합한 데이터 모델로 파싱 및 가공한다.

#### 3. 출력 (Output)
-   **(성공 시):** 처리된 장소 목록이 화면 위에 리스트 형태로 표시된다. 각 항목에는 장소의 이름, 주소 등 기본 정보가 포함된다.
-   **(입력이 비어있을 경우):** 검색이 실행되지 않으며, 사용자에게 입력을 유도하는 시각적 피드백을 제공한다.
-   **(네트워크 오류 시):** 검색 결과 리스트 대신, 오류가 발생했음을 알리고 잠시 후 다시 시도해달라는 메시지를 표시한다.
-   **(결과가 없을 경우):** 검색 결과 리스트 대신, 입력한 키워드에 대한 검색 결과가 없음을 알리는 메시지를 표시한다.

---

### **기능 2: 검색 결과 선택 및 상세 정보 조회 (Select Search Result & View Details)**

#### 1. 입력 (Input)
-   사용자가 화면에 표시된 장소 검색 결과 목록에서 특정 항목을 탭한다.

#### 2. 처리 (Processing)
1.  시스템은 사용자가 탭한 항목으로부터 해당 장소의 고유 식별 정보(예: 장소 ID, 좌표)를 획득한다.
2.  **[엣지케이스]** 시스템은 획득한 식별 정보가 유효한지(null이 아니거나 비어있지 않은지) 검증한다.
    -   **유효하지 않을 경우:** 처리를 중단하고 실패 로직으로 넘어간다.
3.  시스템은 획득한 좌표 정보를 기반으로 지도 위에 해당 위치를 나타내는 마커를 생성하거나, 기존 마커의 위치를 갱신하도록 지도 SDK에 요청한다.
4.  시스템은 지도의 중심점을 해당 장소의 위치로 부드럽게 이동시키도록 요청한다.
5.  시스템은 획득한 고유 식별 정보를 '장소 상세 정보 화면'으로 전달하며 화면 전환을 준비한다. '장소 상세 정보 화면'은 이 정보를 사용하여 해당 장소의 상세 데이터(기존 리뷰 목록 포함)를 요청하고 표시할 책임을 가진다.

#### 3. 출력 (Output)
-   **(성공 시):**
    -   화면이 '장소 상세 정보 화면'으로 전환된다.
    -   새로운 화면에는 선택된 장소의 이름, 주소 등의 기본 정보와 함께, 기존에 등록된 리뷰들의 목록이 표시된다.
    -   배경의 지도는 선택된 장소의 위치로 이동하며, 해당 위치에 명확한 마커가 표시된다.
-   **(데이터 오류 시):**
    -   화면 전환이 일어나지 않는다.
    -   사용자에게 장소 정보를 불러오는 데 실패했음을 알리는 간단한 오류 피드백을 토스트 메시지나 스낵바 형태로 잠시 보여준다.

---

### **기능 3: 리뷰 작성 (Write a Review)**

#### 1. 입력 (Input)
-   사용자가 '장소 상세 정보 화면'에서 '리뷰 작성하기' 버튼을 탭한다.
-   사용자가 '리뷰 작성 화면'으로 전환된 후, 각 입력 필드에 정보를 기입한다. (작성자 정보, 평점, 리뷰 내용, 비밀번호)
-   사용자가 모든 정보 입력을 마친 후 '등록하기' 버튼을 탭한다.

#### 2. 처리 (Processing)
1.  시스템은 '등록하기' 버튼 탭 이벤트를 감지하고, 모든 입력 필드의 데이터를 가져온다.
2.  **[엣지케이스]** 시스템은 필수 입력 값(작성자, 평점, 리뷰 내용, 비밀번호) 중 누락된 것이 있는지 검증한다.
    -   **누락된 값이 있을 경우:** 처리를 중단하고, 어떤 정보가 누락되었는지에 대한 데이터를 준비한다.
3.  **[엣지케이스]** 시스템은 리뷰 내용이 최소/최대 글자 수 등 비즈니스 규칙을 충족하는지 검증한다.
    -   **충족하지 못할 경우:** 처리를 중단하고, 조건 미충족에 대한 데이터를 준비한다.
4.  모든 유효성 검증을 통과하면, 시스템은 리뷰 데이터를 저장하기 위한 데이터 객체를 생성한다.
5.  (보안 처리) 시스템은 비밀번호를 평문이 아닌 해시(hash)된 값으로 변환하여 저장 준비를 한다.
6.  시스템은 생성된 데이터 객체를 데이터베이스에 저장을 요청한다.
7.  **[엣지케이스]** 시스템은 데이터베이스 저장 과정에서 오류(네트워크 단절, DB 서버 오류 등)가 발생하는지 감지한다.
    -   **저장 실패 시:** 실패 처리를 진행한다.
8.  저장이 성공적으로 완료되면, 시스템은 '장소 상세 정보 화면'을 갱신할 준비를 하고 화면 전환을 요청한다.

#### 3. 출력 (Output)
-   **(성공 시):**
    -   '리뷰 작성 화면'이 닫히고 이전 화면인 '장소 상세 정보 화면'으로 자동 전환된다.
    -   '장소 상세 정보 화면'의 리뷰 목록이 새로고침되어, 방금 작성된 리뷰가 목록의 최상단에 즉시 표시된다.
    -   리뷰가 성공적으로 등록되었음을 알리는 긍정적인 피드백을 토스트 메시지 등으로 잠시 보여준다.
-   **(유효성 검증 실패 시):**
    -   화면이 전환되지 않고 '리뷰 작성 화면'에 머무른다.
    -   사용자에게 어떤 항목이 잘못되었는지 명확히 알려주는 시각적 피드백을 제공한다. (예: 누락된 입력 필드 하단에 안내 메시지 표시)
-   **(데이터베이스 저장 실패 시):**
    -   '리뷰 작성 화면'에 머무른다.
    -   오류가 발생하여 리뷰를 등록하지 못했음을 알리는 시스템 오류 메시지를 표시한다.